{% extends "base.html" %}

{% block extra_head %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/pages/hsome.css') }}">
{% endblock %}

{% block content %}
  <p>Bienvenue sur Play'n'Trade</p>

  <button id="open-modal">Échanger mon jeu</button>

  <div id="modal-backdrop" class="modal-backdrop">
    <div class="modal">
      <button id="close-modal" class="modal-close">&times;</button>
      <form method="POST" action="{{ url_for('exchange_game') }}">
          <label for="game_title">Nom du jeu :</label>
          <input list="games" name="game_title" required>
          <datalist id="games">
              {% for game in games %}
              <option value="{{ game[1] }}"></option>
              {% endfor %}
          </datalist>

          <label for="condition">État du jeu :</label>
          <select name="condition" required>
              <option>neuf</option>
              <option>très bon état</option>
              <option>bon état</option>
              <option>acceptable</option>
          </select>

          <label for="city">Ville :</label>
          <input type="text" name="city" required>

          <input type="submit" value="Ajouter">
      </form>
    </div>
  </div>

  <br>
  <br>
  <a href="{{ url_for('admin_panel') }}">Panel admin</a>

{% endblock %}

{% block scripts %}
<script>
  const openBtn = document.getElementById('open-modal');
  const closeBtn = document.getElementById('close-modal');
  const backdrop = document.getElementById('modal-backdrop');

  openBtn.onclick = () => backdrop.style.display = 'flex';
  closeBtn.onclick = () => backdrop.style.display = 'none';
  window.onclick = (e) => {
    if (e.target === backdrop) backdrop.style.display = 'none';
  };
</script>
{% endblock %}
